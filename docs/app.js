!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},r={},o={}.hasOwnProperty,i=/^\.\.?(\/|$)/,a=function(e,t){for(var n,r=[],o=(i.test(t)?e+"/"+t:t).split("/"),a=0,u=o.length;a<u;a++)".."===(n=o[a])?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},c=function(t,r){var o,i={id:t,exports:{},hot:d&&d.createHot(t)};return n[t]=i,r(i.exports,(o=t,function(t){var n=a(u(o),t);return e.require(n,o)}),i),i.exports},s=function(e){var t=r[e];return t&&e!==t?s(t):e},l=function(e,r){null==r&&(r="/");var i=s(e);if(o.call(n,i))return n[i].exports;if(o.call(t,i))return c(i,t[i]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};l.alias=function(e,t){r[t]=e};var f=/\.[^.\/]+$/,v=/\/index(\.[^\/]+)?$/;l.register=l.define=function(e,i){if(e&&"object"==typeof e)for(var a in e)o.call(e,a)&&l.register(a,e[a]);else t[e]=i,delete n[e],function(e){if(f.test(e)){var t=e.replace(f,"");o.call(r,t)&&r[t].replace(f,"")!==t+"/index"||(r[t]=e)}if(v.test(e)){var n=e.replace(v,"");o.call(r,n)||(r[n]=e)}}(e)},l.list=function(){var e=[];for(var n in t)o.call(t,n)&&e.push(n);return e};var d=e._hmr&&new e._hmr(function(e,t){return s(a(u(e),t))},l,t,n);l._cache=n,l.hmr=d&&d.wrap,l.brunch=!0,e.require=l}}(),function(){"undefined"==typeof window||window;var e=function(e,t,n){var r={},o=function(t,n){try{return e(n+"/node_modules/"+t)}catch(e){if(-1===e.toString().indexOf("Cannot find module"))throw e;if(-1!==n.indexOf("node_modules")){var i=n.split("/"),a=i.lastIndexOf("node_modules"),u=i.slice(0,a).join("/");return o(t,u)}}return r};return function(i){if(i in t&&(i=t[i]),i){if("."!==i[0]&&n){var a=o(i,n);if(a!==r)return a}return e(i)}}};require.register("curvature/base/Bag.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Bag=void 0;var r=n("./Bindable"),o=n("./Mixin"),i=n("../mixin/EventTargetMixin");function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=Symbol("Mapped"),v=Symbol("Has"),d=Symbol("Add"),p=Symbol("Remove"),h=Symbol("Delete"),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(i,e);var t,n,o=c(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).meta=Symbol("meta"),e.content=new Map,e.list=r.Bindable.makeBindable([]),e.current=0,e.type=void 0,e.length=0,e.changeCallback=t,e}return t=i,(n=[{key:"has",value:function(e){return this[f]?this[f].has(e):this[v](e)}},{key:v,value:function(e){return this.content.has(e)}},{key:"add",value:function(e){return this[f]?this[f].add(e):this[d](e)}},{key:d,value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(!this.content.has(e)){var t=new CustomEvent("adding",{detail:{item:e}});if(this.dispatchEvent(t)){var n,r=(n=this.current++,Number(n));this.content.set(e,r),this.list[r]=e,this.changeCallback&&this.changeCallback(e,this.meta,i.ITEM_ADDED,r);var o=new CustomEvent("added",{detail:{item:e,id:r}});return this.dispatchEvent(o),this.length=this.size,r}}}},{key:"remove",value:function(e){return this[f]?this[f].remove(e):this[p](e)}},{key:p,value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(!this.content.has(e))return this.changeCallback&&this.changeCallback(e,this.meta,0,void 0),!1;var t=new CustomEvent("removing",{detail:{item:e}});if(this.dispatchEvent(t)){var n=this.content.get(e);delete this.list[n],this.content.delete(e),this.changeCallback&&this.changeCallback(e,this.meta,i.ITEM_REMOVED,n);var r=new CustomEvent("removed",{detail:{item:e,id:n}});return this.dispatchEvent(r),this.length=this.size,e}}},{key:"delete",value:function(e){if(this[f])return this[f].delete(e);this[h](e)}},{key:h,value:function(e){this.remove(e)}},{key:"map",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=new WeakMap,r=new i;return r[f]=this,this.addEventListener("added",function(o){var i=o.detail.item;if(t(i)&&!n.has(i)){var a=e(i);n.set(i,a),r[d](a)}}),this.addEventListener("removed",function(e){var t=e.detail.item;if(n.has(t)){var o=n.get(t);n.delete(t),r[p](o)}}),r}},{key:"size",get:function(){return this.content.size}},{key:"items",value:function(){return Array.from(this.content.entries()).map(function(e){return e[0]})}}])&&a(t.prototype,n),i}(o.Mixin.with(i.EventTargetMixin));t.Bag=y,Object.defineProperty(y,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(y,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})}()}),require.register("curvature/base/Bindable.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t,r,o){return(e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return r&&n(i,r.prototype),i}).apply(null,arguments)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){c=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.Bindable=void 0;var l=Symbol("ref"),f=Symbol("original"),v=Symbol("deck"),d=Symbol("binding"),p=Symbol("subBinding"),h=Symbol("bindingAll"),y=Symbol("isBindable"),b=Symbol("wrapping"),m=Symbol("Names"),g=Symbol("executing"),w=Symbol("stack"),O=(Symbol("object"),Symbol("wrapped")),j=Symbol("unwrapped"),_=Symbol("getProto"),S=Symbol("onGet"),k=Symbol("onAllGet"),P=Symbol("bindChain"),E=Symbol("Descriptors"),A=Symbol("Before"),R=Symbol("After"),T=Symbol("NoGetters"),C=Object.getPrototypeOf(Int8Array),B=Set.prototype[Symbol.iterator],x=Map.prototype[Symbol.iterator],D=globalThis,N=[D.Node,D.File,D.Map,D.Set,D.WeakMap,D.WeakSet,D.ArrayBuffer,D.ResizeObserver,D.MutationObserver,D.PerformanceObserver,D.IntersectionObserver,D.IDBCursor,D.IDBCursorWithValue,D.IDBDatabase,D.IDBFactory,D.IDBIndex,D.IDBKeyRange,D.IDBObjectStore,D.IDBOpenDBRequest,D.IDBRequest,D.IDBTransaction,D.IDBVersionChangeEvent,D.Event,D.CustomEvent,D.FileSystemFileHandle].filter(function(e){return"function"==typeof e}),M=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,i;return n=t,i=[{key:"isBindable",value:function(e){return!(!e||!e[y])&&e[y]===t}},{key:"onDeck",value:function(e,t){return e[v][t]||!1}},{key:"ref",value:function(e){return e[l]||e||!1}},{key:"makeBindable",value:function(e){return this.make(e)}},{key:"shuck",value:function(e,n){n=n||new Map;var r={};if(e instanceof C||e instanceof ArrayBuffer){var o=e.slice(0);return n.set(e,o),o}var i=Object.keys(e);for(var a in i){var c=i[a];if("___"!==c.substring(0,3)){var s=n.get(e[c]);if(s)r[c]=s;else if(e[c]!==e){if(e[c]&&"object"===u(e[c])){var l=e[c];t.isBindable(e[c])&&(l=e[c][f]),r[c]=this.shuck(l,n)}else r[c]=e[c];n.set(e[c],r[c])}else n.set(e[c],r),r[c]=r}}return t.isBindable(e)&&(delete r.bindTo,delete r.isBound),r}},{key:"make",value:function(n){var i=this;if(!n||!["function","object"].includes(u(n)))return n;if(Object.isSealed(n)||Object.isFrozen(n)||!Object.isExtensible(n)||N.filter(function(e){return n instanceof e}).length)return n;if(n[l])return n[l];if(n[y])return n;Object.defineProperty(n,y,{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(n,l,{configurable:!0,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(n,f,{configurable:!1,enumerable:!1,writable:!1,value:n}),Object.defineProperty(n,v,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(n,d,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(n,p,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(n,h,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,g,{enumerable:!1,writable:!0}),Object.defineProperty(n,b,{enumerable:!1,writable:!0}),Object.defineProperty(n,w,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,A,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,R,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,O,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(n,j,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(n,E,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(n,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:function e(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=!1;if(Array.isArray(r)){var s=r.forEach(function(t){return e(t,o,a)});return function(){return s.forEach(function(e){return e()})}}if(r instanceof Function&&(a=o||{},o=r,c=!0),a.delay>=0&&(o=i.wrapDelayCallback(o,a.delay)),a.throttle>=0&&(o=i.wrapThrottleCallback(o,a.throttle)),a.wait>=0&&(o=i.wrapWaitCallback(o,a.wait)),a.frame&&(o=i.wrapFrameCallback(o,a.frame)),a.idle&&(o=i.wrapIdleCallback(o)),c){var l=n[h].length;if(n[h].push(o),!("now"in a)||a.now)for(var f in n)o(n[f],f,n,!1);return function(){delete n[h][l]}}if(n[d][r]||(n[d][r]=new Set),a.children){var v=o;o=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=r[0],c=n[p].get(v);if(c&&(n[p].delete(v),c()),"object"===u(i)){var s=t.make(i);t.isBindable(s)&&n[p].set(v,s.bindTo(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.apply(void 0,r.concat(t))},Object.assign({},a,{children:!1}))),v.apply(void 0,r)}else v.apply(void 0,r)}}n[d][r].add(o),"now"in a&&!a.now||o(n[r],r,n,!1);var y=function(){var e=n[p].get(o);e&&(n[p].delete(o),e()),n[d][r]&&n[d][r].has(o)&&n[d][r].delete(o)};return a.removeWith&&a.removeWith instanceof View&&a.removeWith.onRemove(function(){return y}),y}}),Object.defineProperty(n,P,{configurable:!1,enumerable:!1,writable:!1,value:function(e,t){var r=e.split("."),o=r.shift(),a=r.slice(0),u=[];return u.push(n.bindTo(o,function(e,n,r,o){var c=a.join(".");0!==a.length?(void 0===e&&(e=r[n]=i.makeBindable({})),u=u.concat(e[P](c,t))):t(e,n,r,o)})),function(){return u.forEach(function(e){return e()})}}}),Object.defineProperty(n,"___before",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=n[A].length;n[A].push(e);var r=!1;return function(){r||(r=!0,delete n[A][t])}}}),Object.defineProperty(n,"___after",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=n[R].length;n[R].push(e);var r=!1;return function(){r||(r=!0,delete n[R][t])}}}),Object.defineProperty(n,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e in n[h])if(n[h][e])return!0;for(var t in n[d])for(var r in n[d][t])if(n[d][t][r])return!0;return!1}});var a=function(e){n[e]&&n[e]instanceof Object&&!n[e]instanceof Promise&&(N.filter(function(t){return n[e]instanceof t}).length||!Object.isExtensible(n[e])||Object.isSealed(n[e])||(n[e]=t.make(n[e])))};for(var c in n)a(c);var s=n[E],D=n[O],M=n[w],L={get:function(r,i){if(D.has(i))return D.get(i);if(i===l||i===f||"apply"===i||"isBound"===i||"bindTo"===i||"__proto__"===i||"constructor"===i)return n[i];var a;if(s.has(i)?a=s.get(i):(a=Object.getOwnPropertyDescriptor(n,i),s.set(i,a)),a&&!a.configurable&&!a.writable)return n[i];if(k in n)return n[k](i);if(S in n&&!(i in n))return n[S](i);if(a&&!a.configurable&&!a.writable)return D.set(i,n[i]),n[i];if("function"==typeof n[i]){if(m in n[i])return n[i];Object.defineProperty(n[j],i,{configurable:!1,enumerable:!1,writable:!0,value:n[i]});var u=Object.getPrototypeOf(n)[i]===n[i],c="function"==typeof Promise&&n instanceof Promise||"function"==typeof Map&&n instanceof Map||"function"==typeof Set&&n instanceof Set||"function"==typeof x&&n.prototype===x||"function"==typeof B&&n.prototype===B||"function"==typeof B&&n.prototype===B||"function"==typeof WeakMap&&n instanceof WeakMap||"function"==typeof WeakSet&&n instanceof WeakSet||"function"==typeof Date&&n instanceof Date||"function"==typeof C&&n instanceof C||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||"function"==typeof EventTarget&&n instanceof EventTarget||"function"==typeof ResizeObserver&&n instanceof ResizeObserver||"function"==typeof MutationObserver&&n instanceof MutationObserver||"function"==typeof PerformanceObserver&&n instanceof PerformanceObserver||"function"==typeof IntersectionObserver&&n instanceof IntersectionObserver||"function"==typeof n[Symbol.iterator]&&"next"===i?n:n[l],v=function(){n[g]=i,M.unshift(i);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s,l,f=o(n[A]);try{for(f.s();!(s=f.n()).done;){(0,s.value)(n,i,M,n,r)}}catch(e){f.e(e)}finally{f.f()}if(new.target)l=e(n[j][i],r);else{var v=n[j][i];l=u?v.apply(c||n,r):v.apply(void 0,r)}var d,p=o(n[R]);try{for(p.s();!(d=p.n()).done;){(0,d.value)(n,i,M,n,r)}}catch(e){p.e(e)}finally{p.f()}return n[g]=null,M.shift(),l};(v[m]=v[m]||new WeakMap).set(n,i),v[k]=function(e){var t=v[m].get(n);return n[t][e]};var d=t.make(v);return D.set(i,d),d}return n[i]},set:function(e,r,i){if(D.has(r)&&D.delete(r),r===f)return!0;var a=n[v];if(void 0!==a[r]&&a[r]===i)return!0;if(r.slice&&"___"===r.slice(-3))return!0;if(e[r]===i)return!0;for(var u in i&&i instanceof Object&&(N.filter(function(e){return n instanceof e}).length||!Object.isExtensible(n)||Object.isSealed(n)||(n[T],i=t.makeBindable(i))),a[r]=i,n[h])n[h][u]&&n[h][u](i,r,e,!1);var c=!1;if(r in n[d]){var s,l=o(n[d][r]);try{for(l.s();!(s=l.n()).done;)!1===(0,s.value)(i,r,e,!1,e[r])&&(c=!0)}catch(e){l.e(e)}finally{l.f()}}if(delete a[r],!c){var p=Object.getOwnPropertyDescriptor(e,r);e instanceof File&&"lastModifiedDate"==r||p&&!p.writable||e[r]!==i||(e[r]=i)}var y=Reflect.set(e,r,i);if(Array.isArray(e)&&n[d].length)for(var b in n[d].length)(0,n[d].length[b])(e.length,"length",e,!1,e.length);return y},construct:function(o,i){var a="constructor";for(var u in o[A])o[A][u](o,a,n[w],void 0,i);var c=t.make(e(o[f],r(i)));for(var s in o[R])o[R][s](o,a,n[w],c,i);return c},getPrototypeOf:function(e){return _ in n?n[_]:Reflect.getPrototypeOf(e)},deleteProperty:function(e,t){var r=n[v];if(void 0!==r[t])return!0;if(!(t in e))return!0;if(s.has(t)){var i=s.get(t);if(i&&!i.configurable)return!1;s.delete(t)}for(var a in r[t]=null,D.has(t)&&D.delete(t),n[h])n[h][a](void 0,t,e,!0,e[t]);if(t in n[d]){var u,c=o(n[d][t]);try{for(c.s();!(u=c.n()).done;)(0,u.value)(void 0,t,e,!0,e[t])}catch(e){c.e(e)}finally{c.f()}}return delete r[t],delete e[t],!0}};return n[T]&&delete L.get,Object.defineProperty(n,l,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(n,L)}),n[l]}},{key:"clearBindings",value:function(e){var t;(t=function(e){return Object.keys(e).map(function(t){return delete e[t]})},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.map(t)})(e[O],e[d],e[h],e[R],e[A])}},{key:"resolve",value:function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.split("."),i=o[0];o.length;){if(r&&1===o.length)return[this.make(e),o.shift(),i];!(!(n=o.shift())in e)&&e[n]&&e[n]instanceof Object||(e[n]={}),e=this.make(e[n])}return[this.make(e),n,i]}},{key:"wrapDelayCallback",value:function(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return setTimeout(function(){return e.apply(void 0,r)},t)}}},{key:"wrapThrottleCallback",value:function(e,t){var n=this;return this.throttles.set(e,!1),function(){n.throttles.get(e,!0)||(e.apply(void 0,arguments),n.throttles.set(e,!0),setTimeout(function(){n.throttles.set(e,!1)},t))}}},{key:"wrapWaitCallback",value:function(e,t){var n=this;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a;(a=n.waiters.get(e))&&(n.waiters.delete(e),clearTimeout(a)),a=setTimeout(function(){return e.apply(void 0,o)},t),n.waiters.set(e,a)}}},{key:"wrapFrameCallback",value:function(e,t){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];requestAnimationFrame(function(){return e.apply(void 0,n)})}}},{key:"wrapIdleCallback",value:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(window.requestIdleCallback||requestAnimationFrame)(function(){return e.apply(void 0,n)})}}}],null&&c(n.prototype,null),i&&c(n,i),t}();t.Bindable=M,s(M,"waiters",new WeakMap),s(M,"throttles",new WeakMap),Object.defineProperty(M,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:S}),Object.defineProperty(M,"NoGetters",{configurable:!1,enumerable:!1,writable:!1,value:T}),Object.defineProperty(M,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:_}),Object.defineProperty(M,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:k})}()}),require.register("curvature/base/Cache.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0;var n=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r;return n=t,r=[{key:"store",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"standard",o=0;n&&(o=1e3*n+(new Date).getTime()),this.buckets||(this.buckets=new Map),this.buckets.has(r)||this.buckets.set(r,new Map);var i=new CustomEvent("cvCacheStore",{cancelable:!0,detail:{key:e,value:t,expiry:n,bucket:r}});document.dispatchEvent(i)&&this.buckets.get(r).set(e,{value:t,expiration:o})}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"standard",r=new CustomEvent("cvCacheLoad",{cancelable:!0,detail:{key:e,defaultvalue:t,bucket:n}});if(!document.dispatchEvent(r))return t;if(this.buckets&&this.buckets.has(n)&&this.buckets.get(n).has(e)){var o=this.buckets.get(n).get(e);if(0===o.expiration||o.expiration>(new Date).getTime())return this.buckets.get(n).get(e).value}return t}}],null&&e(n.prototype,null),r&&e(n,r),t}();t.Cache=n}()}),require.register("curvature/base/Config.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var r={},o=n;try{r=o("/Config").Config||{}}catch(e){!0===globalThis.devMode&&console.error(e)}var i=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r;return n=t,r=[{key:"get",value:function(e){return this.configs[e]}},{key:"set",value:function(e,t){return this.configs[e]=t,this}},{key:"dump",value:function(){return this.configs}},{key:"init",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r in t){var o=t[r];for(var i in"string"==typeof o&&(o=JSON.parse(o)),o){var a=o[i];return this.configs[i]=a}}return this}}],null&&e(n.prototype,null),r&&e(n,r),t}();t.Config=i,Object.defineProperty(i,"configs",{configurable:!1,enumerable:!1,writable:!1,value:r})}()}),require.register("curvature/base/Dom.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Dom=void 0;var n=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r;return n=t,r=[{key:"mapTags",value:function(e,t,n,r,o){var i=[],a=!0;r&&(a=!1);for(var u=!1,c=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(e,n){if(!a){if(e!==r)return NodeFilter.FILTER_SKIP;a=!0}return o&&e===o&&(u=!0),u?NodeFilter.FILTER_SKIP:t?e instanceof Element&&e.matches(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);c.nextNode();)i.push(n(c.currentNode,c));return i}},{key:"dispatchEvent",value:function(e,n){e.dispatchEvent(n),t.mapTags(e,!1,function(e){e.dispatchEvent(n)})}}],null&&e(n.prototype,null),r&&e(n,r),t}();t.Dom=n}()}),require.register("curvature/base/Mixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mixin=void 0;var e=n("./Bindable");function r(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=Symbol("constructor"),h=(Symbol("mixinList"),function(){function t(){v(this,t)}return function(e,t,n){n&&d(e,n)}(t,0,[{key:"from",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(u,e);var a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}(u);function u(){var n;v(this,u);for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];var p,h=e.constructor?n=a.call.apply(a,[this].concat(f)):null,y=i(r);try{for(y.s();!(p=y.n()).done;){var b=p.value;switch(b[t.Constructor]&&b[t.Constructor].apply(l(n)),o(b)){case"function":t.mixClass(b,u);break;case"object":t.mixObject(b,l(n))}}}catch(e){y.e(e)}finally{y.f()}return s(n,h)}return u}()}},{key:"to",value:function(e){for(var t={},n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r.map(function(n){switch(o(n)){case"object":Object.assign(t,Object.getOwnPropertyDescriptors(n));break;case"function":Object.assign(t,Object.getOwnPropertyDescriptors(n.prototype))}delete t.constructor,Object.defineProperties(e.prototype,t)})}},{key:"with",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.from.apply(this,[function e(){v(this,e)}].concat(t))}},{key:"mixObject",value:function(e,t){var n,r=i(Object.getOwnPropertyNames(e));try{for(r.s();!(n=r.n()).done;){var o=n.value;"function"!=typeof e[o]?t[o]=e[o]:t[o]=e[o].bind(t)}}catch(e){r.e(e)}finally{r.f()}var a,u=i(Object.getOwnPropertySymbols(e));try{for(u.s();!(a=u.n()).done;){var c=a.value;"function"!=typeof e[c]?t[c]=e[c]:t[c]=e[c].bind(t)}}catch(e){u.e(e)}finally{u.f()}}},{key:"mixClass",value:function(e,t){var n,r=i(Object.getOwnPropertyNames(e.prototype));try{for(r.s();!(n=r.n()).done;){var o=n.value;if(!["name","prototype","length"].includes(o)){var a=Object.getOwnPropertyDescriptor(t,o);a&&!a.writable||("function"==typeof e[o]?t.prototype[o]=e.prototype[o].bind(t.prototype):t.prototype[o]=e.prototype[o])}}}catch(e){r.e(e)}finally{r.f()}var u,c=i(Object.getOwnPropertySymbols(e.prototype));try{for(c.s();!(u=c.n()).done;){var s=u.value;"function"==typeof e[s]?t.prototype[s]=e.prototype[s].bind(t.prototype):t.prototype[s]=e.prototype[s]}}catch(e){c.e(e)}finally{c.f()}var l,f=i(Object.getOwnPropertyNames(e));try{var v=function(){var n=l.value;if(["name","prototype","length"].includes(n))return"continue";var r=Object.getOwnPropertyDescriptor(t,n);if(r&&!r.writable)return"continue";if("function"!=typeof e[n])return t[n]=e[n],"continue";var o=t[n]||!1,i=e[n].bind(t);t[n]=function(){return o&&o.apply(void 0,arguments),i.apply(void 0,arguments)}};for(f.s();!(l=f.n()).done;)v()}catch(e){f.e(e)}finally{f.f()}var d,p=i(Object.getOwnPropertySymbols(e));try{var h=function(){var n=d.value;if("function"!=typeof e[n])return t.prototype[n]=e[n],"continue";var r=t[n]||!1,o=e[n].bind(t);t[n]=function(){return r&&r.apply(void 0,arguments),o.apply(void 0,arguments)}};for(p.s();!(d=p.n()).done;)h()}catch(e){p.e(e)}finally{p.f()}}},{key:"mix",value:function(t){for(var n={},o={},a=e.Bindable.makeBindable(t),u=function(e){var t,u=Object.getOwnPropertyNames(e.prototype),c=/^(before|after)__(.+)/,s=i(Object.getOwnPropertyNames(e));try{var l=function(){var o=t.value,i=o.match(c);if(i){switch(i[1]){case"before":a.___before(function(t,n,a,u,c){if(n===i[2])return e[o].bind(u).apply(void 0,r(c))});break;case"after":a.___after(function(t,n,a,u,c){if(n===i[2])return e[o].bind(u).apply(void 0,r(c))})}return"continue"}return n[o]||"function"!=typeof e[o]?"continue":void(n[o]=e[o])};for(s.s();!(t=s.n()).done;)l()}catch(e){s.e(e)}finally{s.f()}var f,v=i(u);try{var d=function(){var t=f.value,n=t.match(c);if(n){switch(n[1]){case"before":a.___before(function(o,i,a,u,c){if(i===n[2])return e.prototype[t].bind(u).apply(void 0,r(c))});break;case"after":a.___after(function(o,i,a,u,c){if(i===n[2])return e.prototype[t].bind(u).apply(void 0,r(c))})}return"continue"}return o[t]||"function"!=typeof e.prototype[t]?"continue":void(o[t]=e.prototype[t])};for(v.s();!(f=v.n()).done;)d()}catch(e){v.e(e)}finally{v.f()}},c=this;c&&c.prototype;c=Object.getPrototypeOf(c))u(c);for(var s in n)t[s]=n[s].bind(t);var l=function(e){t.prototype[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o[e].apply(this,n)}};for(var f in o)l(f);return a}}]),t}());t.Mixin=h,h.Constructor=p}()}),require.register("curvature/base/Router.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var e=n("./View"),r=(n("./Cache"),n("./Config")),o=n("./Routes");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=Symbol("NotFound"),s=Symbol("Internal"),l=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,a;return n=t,a=[{key:"wait",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded";(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document).addEventListener(n,function(){t.listen(e)})}},{key:"listen",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.listener=e||this.listener,this.routes=n||e.routes,Object.assign(this.query,this.queryOver({}));var r=function(n){for(var r in n.preventDefault(),n.state&&"routedId"in n.state?(n.state.routedId<=t.routeCount?(t.history.splice(n.state.routedId),t.routeCount=n.state.routedId):n.state.routedId>t.routeCount&&(t.history.push(n.state.prev),t.routeCount=n.state.routedId),t.state=n.state):null!==t.prevPath&&t.prevPath!==location.pathname&&t.history.push(t.prevPath),"null"!==location.origin?t.match(location.pathname,e):t.match(t.nextPath,e),t.query)delete t.query[r];Object.assign(t.query,t.queryOver({}))};window.addEventListener("popstate",r),window.addEventListener("cvUrlChanged",r);var o="null"!==location.origin&&location.pathname+location.search;location.origin&&location.hash&&(o+=location.hash);var i={routedId:this.routeCount,url:location.pathname,prev:this.prevPath};"null"!==location.origin&&history.replaceState(i,null,location.pathname),this.go(!1!==o?o:"/")}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r.Config.get("title");n&&(document.title=n);var o={routedId:this.routeCount,prev:this.prevPath,url:location.pathname};for(var i in-1===t?this.match(e,this.listener,!0):"null"===location.origin?this.nextPath=e:2===t&&location.pathname!==e?history.replaceState(o,null,e):location.pathname!==e&&history.pushState(o,null,e),(!t||t<0)&&(!1===t&&(this.path=null),t||("#"===e.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged")))),this.query)delete this.query[i];Object.assign(this.query,this.queryOver({})),this.prevPath=e}},{key:"match",value:function(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.path!==t||i||"undefined"==typeof document){this.queryString=location.search,this.path=t;var a=this.prevPath,u=n&&n.args?n.args.content:null,s=this.routes||n&&n.routes||o.Routes.dump();for(var l in new URLSearchParams(location.search),this.query)delete this.query[l];Object.assign(this.query,this.queryOver({}));var f={},v=!1,d="";for(var p in t=t.substr(1).split("/"),this.query)f[p]=this.query[p];e:for(var h in s){var y=h.split("/");if(!(y.length<t.length&&"*"!==y[y.length-1])){for(var b in y)if("%"==y[b].substr(0,1)){var m=null,g=/^%(\w+)\??/.exec(y[b]);if(g&&g[1]&&(m=g[1]),!m)throw new Error("".concat(y[b],' is not a valid argument segment in route "').concat(h,'"'));if(t[b])f[m]=t[b];else{if("?"!=y[b].substr(y[b].length-1,1))continue e;f[m]=""}}else if("*"!==y[b]&&t[b]!==y[b])continue e;v=h,d=s[h],"*"===y[y.length-1]&&(f.pathparts=t.slice(y.length-1));break}}var w=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:t,prev:a,root:n,selected:v,routes:s}});if("undefined"==typeof document||document.dispatchEvent(w)){if(!i&&n&&u&&d instanceof Object&&u instanceof d&&!(d instanceof Promise)&&u.update(f))return n.args.content=u,!0;v in s||(s[v]=s[c]);var O=function(t){return"function"==typeof s[t]?s[t].prototype instanceof e.View?new s[t](f):s[t](f):s[t]};try{return!1===(d=O(v))&&(d=O(c)),d instanceof Promise||(d=Promise.resolve(d)),"undefined"==typeof document?d:d.then(function(e){r.update(n,t,e,s,v,f,i)}).catch(function(e){throw"undefined"!=typeof document&&document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:t,prev:a,view:n,routes:s,selected:v}})),r.update(n,t,window.devMode?String(e):"Error: 500",s,v,f,i),e})}catch(e){console.error(e),"undefined"!=typeof document&&document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:t,prev:a,view:n,routes:s,selected:v}})),this.update(n,t,window.devMode?String(e):"Error: 500",s,v,f,i)}}}}},{key:"update",value:function(t,n,r,o,i,a,u){if(t){var c=this.prevPath,s=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:r,path:n,prev:c,view:t,routes:o,selected:i}});!1!==r&&(t.args.content instanceof e.View&&(t.args.content.pause(!0),t.args.content.remove()),document.dispatchEvent(s)&&(t.args.content=r),r instanceof e.View&&(r.pause(!1),r.update(a,u)));var l=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:r,path:n,prev:c,view:t,routes:o,selected:i}});document.dispatchEvent(l)}}},{key:"queryOver",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={},r={},o=i(new URLSearchParams(location.search));try{for(o.s();!(e=o.n()).done;){var a=e.value;r[a[0]]=a[1]}}catch(e){o.e(e)}finally{o.f()}return delete(n=Object.assign(n,r,t)).api,n}},{key:"queryToString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=e;for(var o in t||(r=this.queryOver(e)),r)""!==r[o]&&n.push(o+"="+encodeURIComponent(r[o]));return n.join("&")}},{key:"setQuery",value:function(e,t,n){var r=this.queryOver();r[e]=t,void 0===t&&delete r[e];var o=this.queryToString(r,!0);this.go(location.pathname+(o?"?"+o:"?"),n)}}],null&&u(n.prototype,null),a&&u(n,a),t}();t.Router=l,Object.defineProperty(l,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(l,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(l,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(l,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(l,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(l,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:s}),Object.defineProperty(l,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:c})}()}),require.register("curvature/base/Routes.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Routes=void 0;var r={},o=n;try{Object.assign(r,o("Routes").Routes||{})}catch(e){!0===globalThis.devMode&&console.warn(e)}var i=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r;return n=t,r=[{key:"get",value:function(e){return this.routes[e]}},{key:"dump",value:function(){return this.routes}}],null&&e(n.prototype,null),r&&e(n,r),t}();t.Routes=i,Object.defineProperty(i,"routes",{configurable:!1,enumerable:!1,writable:!1,value:r})}()}),require.register("curvature/base/RuleSet.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuleSet=void 0,n("./Dom");var e=n("./Tag"),r=n("./View");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,a,u;return n=t,a=[{key:"add",value:function(e,t){return this.rules=this.rules||{},this.rules[e]=this.rules[e]||[],this.rules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var r in t.apply(e,n),this.rules)for(var o in this.rules[r]){var a,u=this.rules[r][o],c=t.wrap(e,u,n),s=i(e.querySelectorAll(r));try{for(s.s();!(a=s.n()).done;){c(a.value)}}catch(e){s.e(e)}finally{s.f()}}}},{key:"purge",value:function(){if(this.rules)for(var e=0,t=Object.entries(this.rules);e<t.length;e++){var n=o(t[e],2),r=n[0];if(n[1],this.rules[r])for(var i in this.rules[r])delete this.rules[r][i]}}}],u=[{key:"add",value:function(e,t){return this.globalRules=this.globalRules||{},this.globalRules[e]=this.globalRules[e]||[],this.globalRules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var n in this.globalRules)for(var r in this.globalRules[n]){var o,a=this.globalRules[n][r],u=this.wrap(e,a,t),c=i(e.querySelectorAll(n));try{for(c.s();!(o=c.n()).done;){u(o.value)}}catch(e){c.e(e)}finally{c.f()}}}},{key:"wait",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=function(t,n){return function(){return n.removeEventListener(t,r),e.apply()}}(t,n);n.addEventListener(t,r)}},{key:"wrap",value:function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=n;return(n instanceof r.View||n&&n.prototype&&n.prototype instanceof r.View)&&(i=function(){return n}),function(t){if(void 0===t.___cvApplied___&&Object.defineProperty(t,"___cvApplied___",{enumerable:!1,writable:!1,value:new WeakSet}),!t.___cvApplied___.has(n)){var a,u;o&&(a=u=o,o.viewList&&(u=o.viewList.parent));var c,s=new e.Tag(t,u,null,void 0,a),l=s.element.parentNode,f=s.element.nextSibling,v=i(s);if(!1!==v&&t.___cvApplied___.add(n),v instanceof HTMLElement&&(v=new e.Tag(v)),v instanceof e.Tag){if(!v.element.contains(s.element)){for(;s.element.firstChild;)v.element.appendChild(s.element.firstChild);s.remove()}f?l.insertBefore(v.element,f):l.appendChild(v.element)}v&&v.prototype&&v.prototype instanceof r.View&&(v=new v({},o)),v instanceof r.View&&(o&&(o.cleanup.push((c=v,function(){c.remove()})),o.cleanup.push(o.args.bindTo(function(e,t,n){n[t]=e,v.args[t]=e})),o.cleanup.push(v.args.bindTo(function(e,t,n,r){n[t]=e,o.args[t]=e}))),s.clear(),v.render(s.element))}}}}],a&&c(n.prototype,a),u&&c(n,u),t}();t.RuleSet=s}()}),require.register("curvature/base/SetMap.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t,r,o){return(e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return r&&n(i,r.prototype),i}).apply(null,arguments)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.SetMap=void 0;var u=function(){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,n="_map",r=new Map,n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}var n,i;return n=t,(i=[{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"getOne",value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){c=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}(this.get(e));try{for(n.s();!(t=n.n()).done;)return t.value}catch(e){n.e(e)}finally{n.f()}}},{key:"add",value:function(e,t){var n=this._map.get(e);return n||this._map.set(e,n=new Set),n.add(t)}},{key:"remove",value:function(e,t){var n=this._map.get(e);if(n){var r=n.delete(t);return n.size||this._map.delete(e),r}}},{key:"values",value:function(){return e(Set,r(r(this._map.values()).map(function(e){return r(e.values())})))}}])&&a(n.prototype,i),t}();t.SetMap=u}()}),require.register("curvature/base/Tag.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;var e=n("./Bindable");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=Symbol("CurrentStyle"),i=function(){function t(n,r,i,a,u){var c=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof n){var s=document.createRange().createContextualFragment(n);n=s.firstChild}this.element=e.Bindable.makeBindable(n),this.node=this.element,this.parent=r,this.direct=u,this.ref=i,this.index=a,this.cleanup=[],this[e.Bindable.OnAllGet]=function(e){return"function"==typeof c[e]?c[e]:c.node&&"function"==typeof c.node[e]?function(){var t;return(t=c.node)[e].apply(t,arguments)}:"style"===e?c.proxy.style:c.node&&e in c.node?c.node[e]:c[e]},this[o]=new Map;var l=e.Bindable.make(function(e){if(this.node)for(var t in e){var n=String(e[t]);this[o].has(t)&&this[o].get(t)===e[t]||("-"===t[0]?this.node.style.setProperty(t,n):this.node.style[t]=n,void 0!==e[t]?this[o].set(t,e[t]):this[o].delete(t))}});return Object.defineProperty(this,"style",{value:l}),this.proxy=e.Bindable.make(this),this.proxy.style.bindTo(function(e,t,n,r){c[o].has(t)&&c[o].get(t)===e||(c.node.style[t]=e,r||void 0===e?c[o].delete(t):c[o].set(t,e))}),this.proxy.bindTo(function(e,t){return t in n&&(n[t]=e),!1}),this.proxy}var n,i;return n=t,(i=[{key:"attr",value:function(e){for(var t in e)void 0===e[t]?this.node.removeAttribute(t):null===e[t]?this.node.setAttribute(t,""):this.node.setAttribute(t,e[t])}},{key:"remove",value:function(){var t;for(this.node&&this.node.remove(),e.Bindable.clearBindings(this);t=this.cleanup.shift();)t();if(this.clear(),this.node){var n=new Event("cvDomDetached");this.node.dispatchEvent(n),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var e=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(e),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(){}},{key:"listen",value:function(e,t,n){var r=this.node;r.addEventListener(e,t,n);var o=function(){r.removeEventListener(e,t,n)},i=function(){o(),o=function(){return console.warn("Already removed!")}};return this.parent.onRemove(function(){return i()}),i}}])&&r(n.prototype,i),t}();t.Tag=i}()}),require.register("curvature/base/View.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var e=n("./Bindable"),r=n("./ViewList"),o=n("./Router"),i=n("./Dom"),a=n("./Tag"),u=n("./Bag"),c=n("./RuleSet"),s=n("./Mixin"),l=(n("../mixin/PromiseMixin"),n("../mixin/EventTargetMixin"));function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function h(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(this,n)}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=Symbol("dontParse"),_=Symbol("expandBind"),S=Symbol("uuid"),k=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(O,t);var s,l,h,y=g(O);function O(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,O),t=y.call(this,n,r),Object.defineProperty(w(t),"args",{value:e.Bindable.make(n)}),Object.defineProperty(w(t),S,{value:t.constructor.uuid()}),Object.defineProperty(w(t),"nodesAttached",{value:new u.Bag(function(e,t,n){})}),Object.defineProperty(w(t),"nodesDetached",{value:new u.Bag(function(e,t,n){})}),Object.defineProperty(w(t),"_onRemove",{value:new u.Bag(function(e,t,n){})}),Object.defineProperty(w(t),"cleanup",{value:[]}),Object.defineProperty(w(t),"parent",{value:r}),Object.defineProperty(w(t),"views",{value:new Map}),Object.defineProperty(w(t),"viewLists",{value:new Map}),Object.defineProperty(w(t),"withViews",{value:new Map}),Object.defineProperty(w(t),"tags",{value:e.Bindable.make({})}),Object.defineProperty(w(t),"nodes",{value:e.Bindable.make([])}),Object.defineProperty(w(t),"timeouts",{value:new Map}),Object.defineProperty(w(t),"intervals",{value:[]}),Object.defineProperty(w(t),"frames",{value:[]}),Object.defineProperty(w(t),"ruleSet",{value:new c.RuleSet}),Object.defineProperty(w(t),"preRuleSet",{value:new c.RuleSet}),Object.defineProperty(w(t),"subBindings",{value:{}}),Object.defineProperty(w(t),"templates",{value:{}}),Object.defineProperty(w(t),"eventCleanup",{value:[]}),Object.defineProperty(w(t),"unpauseCallbacks",{value:new Map}),Object.defineProperty(w(t),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty(w(t),"rendered",{value:new Promise(function(e,n){return Object.defineProperty(w(t),"renderComplete",{value:e})})}),t.controller=w(t),t.loaded=Promise.resolve(w(t)),t.template="",t.firstNode=null,t.lastNode=null,t.viewList=null,t.mainView=null,t.preserve=!1,t.removed=!1,t}return s=O,l=[{key:"_id",get:function(){return this[S]}},{key:"onFrame",value:function(e){var t=this,n=!1,r=function(){n=!0};return requestAnimationFrame(function(){return function r(o){t.removed||n||(t.paused||e(Date.now()),requestAnimationFrame(r))}(Date.now())}),this.frames.push(r),r}},{key:"onNextFrame",value:function(e){return requestAnimationFrame(function(){return e(Date.now())})}},{key:"onIdle",value:function(e){return requestIdleCallback(function(){return e(Date.now())})}},{key:"onTimeout",value:function(e,t){var n=this,r={timeout:null,callback:null,time:e,fired:!1,created:(new Date).getTime(),paused:!1},o=function(){t(),r.fired=!0,n.timeouts.delete(r.timeout)},i=setTimeout(o,e);return r.callback=o,r.timeout=i,this.timeouts.set(r.timeout,r),i}},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t,n=p(this.timeouts);try{for(n.s();!(t=n.n()).done;){var r=d(t.value,2),o=(r[0],r[1]);clearTimeout(o.timeout),this.timeouts.delete(o.timeout)}}catch(e){n.e(e)}finally{n.f()}})},{key:"onInterval",value:function(e,t){var n=setInterval(t,e);return this.intervals.push({timeout:n,callback:t,time:e,paused:!1}),n}},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){for(var t in this.intervals)e===this.intervals[t].timeout&&(clearInterval(this.intervals[t].timeout),delete this.intervals[t])})},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e&&(this.paused=!this.paused),this.paused=e,this.paused){var t,n=p(this.timeouts);try{for(n.s();!(t=n.n()).done;){var r=d(t.value,2),o=(r[0],r[1]);o.fired?this.timeouts.delete(o.timeout):(clearTimeout(o.timeout),o.paused=!0,o.time=Math.max(0,o.time-(Date.now()-o.created)))}}catch(e){n.e(e)}finally{n.f()}for(var i in this.intervals)clearInterval(this.intervals[i].timeout)}else{var a,u=p(this.timeouts);try{for(u.s();!(a=u.n()).done;){var c=d(a.value,2),s=(c[0],c[1]);s.paused&&(s.fired?this.timeouts.delete(s.timeout):(s.timeout=setTimeout(s.callback,s.time),s.paused=!1))}}catch(e){u.e(e)}finally{u.f()}for(var l in this.intervals)this.intervals[l].timeout.paused&&(this.intervals[l].timeout.paused=!1,this.intervals[l].timeout=setInterval(this.intervals[l].callback,this.intervals[l].time));var f,v=p(this.unpauseCallbacks);try{for(v.s();!(f=v.n()).done;){(0,d(f.value,2)[1])()}}catch(e){v.e(e)}finally{v.f()}this.unpauseCallbacks.clear()}var h,y=p(this.viewLists);try{for(y.s();!(h=y.n()).done;){var b=d(h.value,2);(b[0],b[1]).pause(!!e)}}catch(e){y.e(e)}finally{y.f()}for(var m in this.tags)if(Array.isArray(this.tags[m]))for(var g in this.tags[m])this.tags[m][g].pause(!!e);else this.tags[m].pause(!!e)}},{key:"render",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n instanceof O&&(n=n.firstNode.parentNode),r instanceof O&&(r=r.firstNode),this.firstNode)return this.reRender(n,r);this.dispatchEvent(new CustomEvent("render"));var o=this.template instanceof DocumentFragment?this.template.cloneNode(!0):O.templates.has(this.template),i=o?this.template instanceof DocumentFragment?o:O.templates.get(this.template).cloneNode(!0):document.createRange().createContextualFragment(this.template);if(o||this.template instanceof DocumentFragment||O.templates.set(this.template,i.cloneNode(!0)),this.mainView||this.preRuleSet.apply(i,this),this.mapTags(i),this.mainView||this.ruleSet.apply(i,this),!0===window.devMode?(this.firstNode=document.createComment("Template ".concat(this._id," Start")),this.lastNode=document.createComment("Template ".concat(this._id," End"))):(this.firstNode=document.createTextNode(""),this.lastNode=document.createTextNode("")),(e=this.nodes).push.apply(e,[this.firstNode].concat(v(Array.from(i.childNodes)),[this.lastNode])),this.postRender(n),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(n){var a=n.getRootNode();if(r?(n.insertBefore(this.firstNode,r),n.insertBefore(this.lastNode,r)):(n.appendChild(this.firstNode),n.appendChild(this.lastNode)),n.insertBefore(i,this.lastNode),a.isConnected)this.attached(a,n),this.dispatchAttached(a,n);else{n.addEventListener("cvDomAttached",function e(r){r.target.isConnected&&(t.attached(a,n),t.dispatchAttached(a,n),n.removeEventListener("cvDomAttached",e))})}}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){return this.dispatchEvent(new CustomEvent("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.dispatchEvent(new CustomEvent("attached",{detail:{view:n||this,node:t,root:e,mainView:this}})),this.dispatchDomAttached(n);var r,o=p(this.nodesAttached.items());try{for(o.s();!(r=o.n()).done;){(0,r.value)(e,t)}}catch(e){o.e(e)}finally{o.f()}}},{key:"dispatchDomAttached",value:function(e){var t=this;this.nodes.filter(function(e){return e.nodeType!==Node.COMMENT_NODE}).forEach(function(n){n.matches&&(i.Dom.mapTags(n,!1,function(n,r){n.matches&&n.dispatchEvent(new CustomEvent("cvDomAttached",{target:n,detail:{view:e||t,mainView:t}}))}),n.dispatchEvent(new CustomEvent("cvDomAttached",{target:n,detail:{view:e||t,mainView:t}})))})}},{key:"reRender",value:function(e,t){if(this.dispatchEvent(new CustomEvent("reRender"),{cancelable:!0,target:this})){var n=new DocumentFragment;if(this.firstNode.isConnected){var r=this.nodesDetached.items();for(var o in r)r[o]()}if(n.append.apply(n,v(this.nodes)),e){t?(e.insertBefore(this.firstNode,t),e.insertBefore(this.lastNode,t)):(e.appendChild(this.firstNode),e.appendChild(this.lastNode)),e.insertBefore(n,this.lastNode),this.dispatchEvent(new CustomEvent("reRendered"),{cancelable:!0,target:this});var i=e.getRootNode();i.isConnected&&(this.attached(i,e),this.dispatchAttached(i,e))}return this.nodes}}},{key:"mapTags",value:function(e){var t=this;i.Dom.mapTags(e,!1,function(e,n){e[j]||(e=e.matches?(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=t.mapInterpolatableTag(e)).matches("[cv-template]")&&t.mapTemplateTag(e)||e).matches("[cv-slot]")&&t.mapSlotTag(e)||e).matches("[cv-prerender]")&&t.mapPrendererTag(e)||e).matches("[cv-link]")&&t.mapLinkTag(e)||e).matches("[cv-attr]")&&t.mapAttrTag(e)||e).matches("[cv-expand]")&&t.mapExpandableTag(e)||e).matches("[cv-ref]")&&t.mapRefTag(e)||e).matches("[cv-on]")&&t.mapOnTag(e)||e).matches("[cv-each]")&&t.mapEachTag(e)||e).matches("[cv-bind]")&&t.mapBindTag(e)||e).matches("[cv-with]")&&t.mapWithTag(e)||e).matches("[cv-if]")&&t.mapIfTag(e)||e).matches("[cv-view]")&&t.mapViewTag(e)||e:t.mapInterpolatableTag(e))!==n.currentNode&&(n.currentNode=e)})}},{key:"mapExpandableTag",value:function(t){var n=t[_];n&&(n(),t[_]=!1);var r=d(e.Bindable.resolve(this.args,t.getAttribute("cv-expand"),!0),2),o=r[0],i=r[1];return t.removeAttribute("cv-expand"),o[i]||(o[i]={}),o[i]=e.Bindable.make(o[i]),this.onRemove(t[_]=o[i].bindTo(function(e,n,r,o,i){o||void 0===e?t.removeAttribute(n,e):null!==e?t.setAttribute(n,e):t.setAttribute(n,"")})),t}},{key:"compileExpandableTag",value:function(t){return function(n){var r=t.cloneNode(!0),o=r.getAttribute("cv-expand"),i=e.Bindable.make(n.args[o]||{});r.removeAttribute("cv-expand");var a=function(t){if("name"===t||"type"===t)return"continue";var o=i.bindTo(t,function(e,t){return function(n){e.setAttribute(t,n)}}(r,t));n.onRemove(function(){o(),i.isBound()&&e.Bindable.clearBindings(i)})};for(var u in i)a(u);return r}}},{key:"mapAttrTag",value:function(e){var t=this.compileAttrTag(e)(this);return e.replaceWith(t),t}},{key:"compileAttrTag",value:function(t){var n=t.getAttribute("cv-attr").split(",").map(function(e){return e.split(":")});return t.removeAttribute("cv-attr"),function(r){var o=t.cloneNode(!0),i=function(t){var i=n[t][1]||n[t][0],a=d(e.Bindable.resolve(r.args,i,!0),2),u=a[0],c=a[1],s=n[t][0];r.onRemove(u.bindTo(c,function(e,t,n,r){r||void 0===e?o.removeAttribute(s,e):null!==e?o.setAttribute(s,e):o.setAttribute(s,"")}))};for(var a in n)i(a);return o}}},{key:"mapInterpolatableTag",value:function(t){var n=this,r=this.interpolateRegex;if(t.nodeType===Node.TEXT_NODE){var o=t.nodeValue;if(!this.interpolatable(o))return t;for(var i,u=0,c=function(){var r=i[2],c=!1,s=!1,l=r.split("|"),v=!1;if(l.length>1&&(v=n.stringTransformer(l.slice(1)),r=l[0]),"$$"===r.substr(0,2)&&(c=!0,s=!0,r=r.substr(2)),"$"===r.substr(0,1)&&(c=!0,r=r.substr(1)),"000"===r.substr(0,3))return expand=!0,r=r.substr(3),"continue";var p=o.substring(u,i.index);u=i.index+i[1].length;var h=document.createTextNode(p);h[j]=!0,t.parentNode.insertBefore(h,t);var y=void 0;(y=c?document.createElement("div"):document.createTextNode(""))[j]=!0;var b=n.args,m=r;if(r.match(/\./)){var g=d(e.Bindable.resolve(n.args,r,!0),2);b=g[0],m=g[1]}if(t.parentNode.insertBefore(y,t),"object"!==f(b))return"break";var w=(b=e.Bindable.make(b)).bindTo(m,function(e,r,o){if(o[r]!==e&&(o[r]instanceof O||o[r]instanceof Node||o[r]instanceof a.Tag)&&(o[r].preserve||o[r].remove()),y.nodeValue="",s&&!(e instanceof O)){var i,u=null!==(i=e)&&void 0!==i?i:"";(e=new O(n.args,n)).template=u}if(v&&(e=v(e)),e instanceof O){var l=function(t,r){e.dispatchAttached(t,r,n)};n.nodesAttached.add(l),e.render(t.parentNode,y);var f=function(){e.preserve||e.remove()};n.onRemove(f),e.onRemove(function(){n.nodesAttached.remove(l),n._onRemove.remove(f)})}else e instanceof Node?(t.parentNode.insertBefore(e,y),n.onRemove(function(){return e.remove()})):e instanceof a.Tag?(t.parentNode.insertBefore(e.node,y),n.onRemove(function(){return e.remove()})):(e instanceof Object&&e.__toString instanceof Function&&(e=e.__toString()),c?y.innerHTML=e:y.nodeValue=e);y[j]=!0});n.onRemove(w)};i=r.exec(o);){var s=c();if("continue"!==s&&"break"===s)break}var l=o.substring(u),v=document.createTextNode(l);v[j]=!0,t.parentNode.insertBefore(v,t),t.nodeValue=""}else if(t.nodeType===Node.ELEMENT_NODE)for(var p=function(o){if(!n.interpolatable(t.attributes[o].value))return"continue";for(var i=0,a=void 0,u=t.attributes[o].value,c=t.attributes[o],s={},l=[];a=r.exec(u);)l.push(u.substring(i,a.index)),s[a[2]]||(s[a[2]]=[]),s[a[2]].push(l.length),l.push(a[1]),i=a.index+a[1].length;l.push(u.substring(i));var f=function(r){var o=n.args,i=r,a=r.split("|"),u=!1,f=r;if(a.length>1&&(u=n.stringTransformer(a.slice(1)),i=a[0]),i.match(/\./)){var v=d(e.Bindable.resolve(n.args,i,!0),2);o=v[0],i=v[1]}s[f],n.onRemove(o.bindTo(i,function(e,r,o,a){for(var v in u&&(e=u(e)),s)for(var d in s[f])l[s[f][d]]=o[v],r===i&&(l[s[f][d]]=e);n.paused?n.unpauseCallbacks.set(c,function(){return t.setAttribute(c.name,l.join(""))}):t.setAttribute(c.name,l.join(""))})),n.onRemove(function(){o.isBound()||e.Bindable.clearBindings(o)})};for(var v in s)f(v)},h=0;h<t.attributes.length;h++)p(h);return t}},{key:"mapRefTag",value:function(e){var t=d(e.getAttribute("cv-ref").split(":"),3),n=t[0],r=t[1],o=void 0===r?null:r,i=t[2],u=void 0===i?null:i,c=a.Tag;o&&(c=this.stringToClass(o)),e.removeAttribute("cv-ref"),Object.defineProperty(e,"___tag___",{enumerable:!1,writable:!0}),this.onRemove(function(){e.___tag___=null,e.remove()});var s=this;this.viewList&&(s=this.viewList.parent);var l=new c(e,this,n,void 0,this);for(e.___tag___=l,this.tags[n]=l;s;){var f=this.args[u];if(void 0!==f?(s.tags[n]||(s.tags[n]=[]),s.tags[n][f]=l):s.tags[n]=l,!s.parent)break;s=s.parent}return e}},{key:"mapBindTag",value:function(t){var n=this,r=t.getAttribute("cv-bind"),o=this.args,u=r,c=null;if(r.match(/\./)){var s=d(e.Bindable.resolve(this.args,r,!0),3);o=s[0],u=s[1],c=s[2]}o!==this.args&&(this.subBindings[r]=this.subBindings[r]||[],this.onRemove(this.args.bindTo(c,function(){for(;n.subBindings.length;)n.subBindings.shift()()})));var l=!1;"$"===u.substr(0,1)&&(u=u.substr(1),l=!0);var f=o.bindTo(u,function(e,r,o,u,c){(c instanceof O||c instanceof Node||c instanceof a.Tag)&&c!==e&&c.remove();var s=new CustomEvent("cvAutoChanged",{bubbles:!0});if(["INPUT","SELECT","TEXTAREA"].includes(t.tagName)){var f=t.getAttribute("type");if(f&&"checkbox"===f.toLowerCase())t.checked=!!e,t.dispatchEvent(s);else if(f&&"radio"===f.toLowerCase())t.checked=e==t.value,t.dispatchEvent(s);else if("file"!==f){if("SELECT"===t.tagName){var v=function(){for(var n=0;n<t.options.length;n++)t.options[n].value==e&&(t.selectedIndex=n)};v(),n.nodesAttached.add(v)}else t.value=null==e?"":e;t.dispatchEvent(s)}}else if(e instanceof O){var d,h=p(t.childNodes);try{for(h.s();!(d=h.n()).done;)d.value.remove()}catch(e){h.e(e)}finally{h.f()}var y=function(t){e.dispatchDomAttached(n)};n.nodesAttached.add(y),e.render(t),e.onRemove(function(){return n.nodesAttached.remove(y)})}else if(e instanceof Node)t.insert(e);else if(e instanceof a.Tag)t.append(e.node);else if(l){if(t.innerHTML!==e){if(e=String(e),t.innerHTML===e.substring(0,t.innerHTML.length))t.innerHTML+=e.substring(t.innerHTML.length);else{var b,m=p(t.childNodes);try{for(m.s();!(b=m.n()).done;)b.value.remove()}catch(e){m.e(e)}finally{m.f()}t.innerHTML=e}i.Dom.mapTags(t,!1,function(e){return e[j]=!0})}}else if(t.textContent!==e){var g,w=p(t.childNodes);try{for(w.s();!(g=w.n()).done;)g.value.remove()}catch(e){w.e(e)}finally{w.f()}t.textContent=e}});o!==this.args&&this.subBindings[r].push(f),this.onRemove(f);var v=t.getAttribute("type"),h=t.getAttribute("multiple"),y=function(n){if(n.target===t)if(v&&"checkbox"===v.toLowerCase())t.checked?o[u]=n.target.getAttribute("value"):o[u]=!1;else if(n.target.matches("[contenteditable=true]"))o[u]=n.target.innerHTML;else if("file"===v&&h){var r=Array.from(n.target.files),i=o[u]||e.Bindable.onDeck(o,u);if(i&&r.length){var a=function(e){if(r[e]!==i[e])return r[e].toJSON=function(){return{name:file[e].name,size:file[e].size,type:file[e].type,date:file[e].lastModified}},i[e]=r[e],"break"};for(var c in r)if("break"===a(c))break}else o[u]=r}else if("file"===v&&!h&&n.target.files.length){var s=n.target.files.item(0);s.toJSON=function(){return{name:s.name,size:s.size,type:s.type,date:s.lastModified}},o[u]=s}else o[u]=n.target.value};return"file"===v||"radio"===v?t.addEventListener("change",y):(t.addEventListener("input",y),t.addEventListener("change",y),t.addEventListener("value-changed",y)),this.onRemove(function(){"file"===v||"radio"===v?t.removeEventListener("change",y):(t.removeEventListener("input",y),t.removeEventListener("change",y),t.removeEventListener("value-changed",y))}),t.removeAttribute("cv-bind"),t}},{key:"mapOnTag",value:function(e){var t=this;return String(e.getAttribute("cv-on")).split(";").map(function(e){return e.split(":")}).forEach(function(n){var r,o=(n=n.map(function(e){return e.trim()})).length,i=String(n.shift()).trim(),a=String(n.shift()||i).trim(),u=String(n.shift()||"").trim(),c=[],s=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(a);s&&(a=s[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),s[2]&&(c=s[2].split(",").map(function(e){return e.trim()}))),c.length||c.push("$event"),i&&1!==o||(i=a);for(var l=t,f=function(){var e=l.controller;return"function"==typeof e[a]?(r=function(){e[a].apply(e,arguments)},"break"):"function"==typeof l[a]?(r=function(){var e;(e=l)[a].apply(e,arguments)},"break"):l.parent?void(l=l.parent):"break"};l&&"break"!==f(););var d=function(n){var o=c.map(function(r){var o;return Number(r)==r?r:"event"===r||"$event"===r?n:"$view"===r?l:"$controller"===r?controller:"$tag"===r?e:"$parent"===r?t.parent:"$subview"===r?t:r in t.args?t.args[r]:(o=/^['"]([\w-]+?)["']$/.exec(r))?o[1]:void 0});if("function"!=typeof r)throw new Error("".concat(a," is not defined on View object.")+"\nTag:\n"+"".concat(e.outerHTML));r.apply(void 0,v(o))},p={};switch(u.includes("p")?p.passive=!0:u.includes("P")&&(p.passive=!1),u.includes("c")?p.capture=!0:u.includes("C")&&(p.capture=!1),u.includes("o")?p.once=!0:u.includes("O")&&(p.once=!1),i){case"_init":d();break;case"_attach":t.nodesAttached.add(d);break;case"_detach":t.nodesDetached.add(d);break;default:e.addEventListener(i,d,p),t.onRemove(function(){e.removeEventListener(i,d,p)})}return[i,a,c]}),e.removeAttribute("cv-on"),e}},{key:"mapLinkTag",value:function(e){var t=e.getAttribute("cv-link");e.setAttribute("href",t);var n=function(n){n.preventDefault(),"http"!==t.substring(0,4)&&"//"!==t.substring(0,2)?o.Router.go(e.getAttribute("href")):window.open(e.getAttribute("href",t))};return e.addEventListener("click",n),this.onRemove(function(e,t){return function(){e.removeEventListener("click",t),e=void 0,t=void 0}}(e,n)),e.removeAttribute("cv-link"),e}},{key:"compileLinkTag",value:function(e){var t=e.getAttribute("cv-link");return e.removeAttribute("cv-link"),function(n){var r=e.cloneNode(!0);return r.setAttribute("href",t),r}}},{key:"mapPrendererTag",value:function(e){var t=e.getAttribute("cv-prerender"),n=window.prerenderer||navigator.userAgent.match(/prerender/i);return n&&(window.prerenderer=window.prerenderer||!0),("never"===t&&n||"only"===t&&!n)&&e.parentNode.removeChild(e),e}},{key:"mapWithTag",value:function(t){var n=this,r=t.getAttribute("cv-with"),o=t.getAttribute("cv-carry"),i=t.getAttribute("cv-view");t.removeAttribute("cv-with"),t.removeAttribute("cv-carry"),t.removeAttribute("cv-view");var a=i?this.stringToClass(i):O,u=new DocumentFragment;v(t.childNodes).forEach(function(e){return u.appendChild(e)});var c=[];o&&(c=o.split(",").map(function(e){return e.trim()}));var s=this.args.bindTo(r,function(r,o,i,s){for(n.withViews.has(t)&&n.withViews.delete(t);t.firstChild;)t.removeChild(t.firstChild);var l=new a({},n);n.onRemove(function(e){return function(){e.remove()}}(l)),l.template=u;var v=function(e){var t=n.args.bindTo(c[e],function(e,t){l.args[t]=e});l.onRemove(t),n.onRemove(function(){t(),l.remove()})};for(var d in c)v(d);var p=function(t){if("object"!==f(r))return"continue";var o=(r=e.Bindable.make(r)).bindTo(t,function(e,t,n,r){r?t in l.args&&delete l.args[t]:l.args[t]=e});l.args.bindTo(t,function(e,t,n,o){o?t in r&&delete r[t]:r[t]=e}),n.onRemove(function(){o(),r.isBound()||e.Bindable.clearBindings(r),l.remove()}),l.onRemove(function(){o(),r.isBound()||e.Bindable.clearBindings(r)})};for(var h in r)p(h);l.render(t),n.withViews.set(t,l)});return this.onRemove(function(){n.withViews.delete(t),s()}),t}},{key:"mapViewTag",value:function(e){var t=this,n=e.getAttribute("cv-view");e.removeAttribute("cv-view");var r=new DocumentFragment;v(e.childNodes).forEach(function(e){return r.appendChild(e)});var o=n.split(":"),i=o.pop()?this.stringToClass(n):O,a=o.shift(),u=new i(this.args,this);return this.views.set(e,u),a&&this.views.set(a,u),this.onRemove(function(n){return function(){n.remove(),t.views.delete(e),t.views.delete(a)}}(u)),u.template=r,u.render(e),e}},{key:"mapEachTag",value:function(e){var t=this,n=e.getAttribute("cv-each"),o=e.getAttribute("cv-view");e.removeAttribute("cv-each"),e.removeAttribute("cv-view");var i=o?this.stringToClass(o):O,a=new DocumentFragment;v(e.childNodes).forEach(function(e){return a.appendChild(e)});var c=d(n.split(":"),3),s=c[0],l=c[1],f=c[2],p=this.args.bindTo(s,function(n,o,c,s,v){n instanceof u.Bag&&(n=n.list),t.viewLists.has(e)&&t.viewLists.get(e).remove();var d=new r.ViewList(a,l,n,t,f,i),p=function(){return d.remove()};t.onRemove(p),d.onRemove(function(){return t._onRemove.remove(p)});var h=t.args.bindTo(function(e,t,n,r){"_id"!==t&&(r?t in d.subArgs&&delete d.subArgs[t]:d.subArgs[t]=e)}),y=d.args.bindTo(function(e,n,r,o,i){"_id"!==n&&"value"!==n&&"___"!==String(n).substring(0,3)&&(o?delete t.args[n]:n in t.args&&(t.args[n]=e))});for(d.onRemove(h),d.onRemove(y),t.onRemove(h),t.onRemove(y);e.firstChild;)e.removeChild(e.firstChild);t.viewLists.set(e,d),d.render(e)});return this.onRemove(p),e}},{key:"mapIfTag",value:function(t){var n=this,r=t,o=r.getAttribute("cv-view"),a=r.getAttribute("cv-if"),c=r.getAttribute("cv-is"),s=!1,l=!1;r.removeAttribute("cv-view"),r.removeAttribute("cv-if"),r.removeAttribute("cv-is");var f=o?this.stringToClass(o):O;"!"===a.substr(0,1)&&(a=a.substr(1),s=!0),"?"===a.substr(0,1)&&(a=a.substr(1),l=!0);var p=new DocumentFragment;v(r.childNodes).forEach(function(e){return p.appendChild(e)});var h=this,y=new DocumentFragment,b=new f(Object.assign({},this.args),h);this.onRemove(b.tags.bindTo(function(e,t){n.tags[t]=e})),b.template=p;var m=h.args,g=a;if(a.match(/\./)){var w=d(e.Bindable.resolve(h.args,a,!0),2);m=w[0],g=w[1]}b.render(y);var j=m.bindTo(g,function(e,r){var o=e;l&&(e=null!=e),e instanceof u.Bag&&(e=e.list),Array.isArray(e)&&(e=!!e.length),null!==c&&(e=o==c),s&&(e=!e),e?(t.appendChild(y),v(y.childNodes).forEach(function(e){return i.Dom.mapTags(e,!1,function(e,t){e.matches&&e.dispatchEvent(new CustomEvent("cvDomAttached",{target:e,detail:{view:b||n,mainView:n}}))})})):(b.nodes.forEach(function(e){return y.appendChild(e)}),i.Dom.mapTags(y,!1,function(e,t){e.matches&&new CustomEvent("cvDomDetached",{target:e,detail:{view:b||n,mainView:n}})}))},{children:Array.isArray(m[g])});h.onRemove(j);var _=this.args.bindTo(function(e,t,n,r){"_id"!==t&&(r?t in b.args&&delete b.args[t]:b.args[t]=e)}),S=b.args.bindTo(function(e,t,r,o,i){"_id"!==t&&"___"!==String(t).substring(0,3)&&t in n.args&&(o?delete n.args[t]:n.args[t]=e)});return h.onRemove(function(){j(),_(),S(),h._onRemove.remove(j)}),this.onRemove(function(){_(),S(),b.remove(),h!==n&&h.remove()}),t}},{key:"compileIfTag",value:function(t){var n=t.getAttribute("cv-if"),r=!1;t.removeAttribute("cv-if"),"!"===n.substr(0,1)&&(n=n.substr(1),r=!0);var o=new DocumentFragment;return v(t.childNodes).forEach(function(e){return o.appendChild(e.cloneNode(!0))}),function(i){var a=t.cloneNode(),u=new DocumentFragment,c=new O({},i);c.template=o,i.syncBind(c);var s=i.args,l=n;if(n.match(/\./)){var f=d(e.Bindable.resolve(i.args,n,!0),2);s=f[0],l=f[1]}var v=!1,p=s.bindTo(l,function(e,t){if(!v){var n=i.args[l]||r?a:u;return c.render(n),void(v=!0)}Array.isArray(e)&&(e=!!e.length),r&&(e=!e),e?a.appendChild(u):c.nodes.forEach(function(e){return u.appendChild(e)})});i.onRemove(p);var h=function(){s.isBound()||e.Bindable.clearBindings(s)};return c.onRemove(function(){p(),h(),i._onRemove.remove(p),i._onRemove.remove(h)}),a}}},{key:"mapTemplateTag",value:function(e){var t=e.getAttribute("cv-template");return e.removeAttribute("cv-template"),this.templates[t]=function(){return"TEMPLATE"===e.tagName?e.content.cloneNode(!0):new DocumentFragment(e.innerHTML)},this.rendered.then(function(){return e.remove()}),e}},{key:"mapSlotTag",value:function(e){var t=e.getAttribute("cv-slot"),n=this.templates[t];if(!n){for(var r=this;r&&!(n=r.templates[t]);)r=this.parent;if(!n)return void console.error("Template ".concat(t," not found."))}var o=n();for(e.removeAttribute("cv-slot");e.firstChild;)e.firstChild.remove();return e.appendChild(o),e}},{key:"syncBind",value:function(e){var t=this,n=this.args.bindTo(function(t,n,r,o){"_id"!==n&&e.args[n]!==t&&(e.args[n]=t)}),r=e.args.bindTo(function(e,n,r,o,i){if("_id"!==n){var a=e,u=i;a instanceof O&&(a=a.___ref___),u instanceof O&&(u=u.___ref___),a!==u&&u instanceof O&&i.remove(),n in t.args&&(t.args[n]=e)}});this.onRemove(n),this.onRemove(r),e.onRemove(function(){t._onRemove.remove(n),t._onRemove.remove(r)})}},{key:"postRender",value:function(e){}},{key:"attached",value:function(e){}},{key:"interpolatable",value:function(e){return!!String(e).match(this.interpolateRegex)}},{key:"remove",value:function(){var e=this,t=function(){for(var t in e.tags)Array.isArray(e.tags[t])?(e.tags[t]&&e.tags[t].forEach(function(e){return e.remove()}),e.tags[t].splice(0)):(e.tags[t]&&e.tags[t].remove(),e.tags[t]=void 0);for(var n in e.nodes)e.nodes[n]&&e.nodes[n].dispatchEvent(new Event("cvDomDetached")),e.nodes[n]&&e.nodes[n].remove(),e.nodes[n]=void 0;e.nodes.splice(0),e.firstNode=e.lastNode=void 0};arguments.length>0&&void 0!==arguments[0]&&arguments[0]?t():requestAnimationFrame(t);var n,r=p(this._onRemove.items());try{for(r.s();!(n=r.n()).done;){var o=n.value;o(),this._onRemove.remove(o)}}catch(e){r.e(e)}finally{r.f()}var i,a=p(this.cleanup);try{for(a.s();!(i=a.n()).done;){var u=i.value;u&&u()}}catch(e){a.e(e)}finally{a.f()}this.cleanup.length=0;var c,s=p(this.viewLists);try{for(s.s();!(c=s.n()).done;){var l=d(c.value,2);(l[0],l[1]).remove()}}catch(e){s.e(e)}finally{s.f()}this.viewLists.clear();var f,v=p(this.timeouts);try{for(v.s();!(f=v.n()).done;){var h=d(f.value,2),y=(h[0],h[1]);clearTimeout(y.timeout),this.timeouts.delete(y.timeout)}}catch(e){v.e(e)}finally{v.f()}var b,m=p(this.intervals);try{for(m.s();!(b=m.n()).done;){var g=b.value;clearInterval(g)}}catch(e){m.e(e)}finally{m.f()}this.intervals.length=0;var w,O=p(this.frames);try{for(O.s();!(w=O.n()).done;){(0,w.value)()}}catch(e){O.e(e)}finally{O.f()}this.frames.length=0,this.preRuleSet.purge(),this.ruleSet.purge(),this.removed=!0}},{key:"findTag",value:function(e){for(var t in this.nodes){var n;if(this.nodes[t].querySelector){if(this.nodes[t].matches(e))return new a.Tag(this.nodes[t],this,void 0,void 0,this);if(n=this.nodes[t].querySelector(e))return new a.Tag(n,this,void 0,void 0,this)}}}},{key:"findTags",value:function(e){var t=this;return this.nodes.filter(function(e){return e.querySelectorAll}).map(function(t){return v(t.querySelectorAll(e))}).flat().map(function(e){return new a.Tag(e,t,void 0,void 0,t)})||[]}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(e){}},{key:"afterUpdate",value:function(e){}},{key:"stringTransformer",value:function(e){var t=this;return function(n){for(var r in e){for(var o=t,i=e[r];o&&!o[i];)o=o.parent;if(!o)return;n=o[e[r]](n)}return n}}},{key:"stringToClass",value:function(e){if(O.refClasses.has(e))return O.refClasses.get(e);var t=e.split("/"),r=t[t.length-1],o=n(e);return O.refClasses.set(e,o[r]),o[r]}},{key:"preventParsing",value:function(e){e[j]=!0}},{key:"toString",value:function(){return this.nodes.map(function(e){return e.outerHTML}).join(" ")}},{key:"listen",value:function(e,t,n,r){var o=this;if("string"==typeof e&&(r=n,n=t,t=e,e=this),e instanceof O)return this.listen(e.nodes,t,n,r);if(Array.isArray(e))return e.map(function(e){return o.listen(e,t,n,r)}).forEach(function(e){return e()});if(e instanceof a.Tag)return this.listen(e.element,t,n,r);e.addEventListener(t,n,r);var i=function(){return e.removeEventListener(t,n,r)},u=function(){i(),i=function(){}};return this.onRemove(function(){return u()}),u}},{key:"detach",value:function(){for(var e in this.nodes)this.nodes[e].remove();return this.nodes}}],h=[{key:"from",value:function(e){var t=new this(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.template=e,t}},{key:"isView",value:function(){return O}},{key:"uuid",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}}],l&&b(s.prototype,l),h&&b(s,h),O}(s.Mixin.with(l.EventTargetMixin));t.View=k,Object.defineProperty(k,"templates",{value:new Map}),Object.defineProperty(k,"refClasses",{value:new Map})}()}),require.register("curvature/base/ViewList.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewList=void 0;var e=n("./Bindable"),r=n("./SetMap"),o=n("./View"),i=n("./Bag");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function t(n,r,a,u){var s=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.removed=!1,this.args=e.Bindable.makeBindable({}),this.args.value=e.Bindable.makeBindable(a||{}),this.subArgs=e.Bindable.makeBindable({}),this.views=[],this.cleanup=[],this.viewClass=f||o.View,this._onRemove=new i.Bag,this.template=n,this.subProperty=r,this.keyProperty=l,this.tag=null,this.downDebind=[],this.upDebind=[],this.paused=!1,this.parent=u,this.rendered=new Promise(function(e,t){Object.defineProperty(s,"renderComplete",{configurable:!1,writable:!0,value:e})}),this.willReRender=!1,this.args.___before(function(e,t,n,r,o){"bindTo"!=t&&(s.paused=!0)}),this.args.___after(function(e,t,n,r,o){"bindTo"!=t&&(s.paused=n.length>1,s.reRender())});var v=this.args.value.bindTo(function(e,t,n,r){if(!s.paused){var o=t;if("symbol"!==c(t))if(isNaN(t)&&(o="_"+t),r)for(var i in s.views[o]&&s.views[o].remove(),delete s.views[o],s.views)isNaN(i)?s.views[i].args[s.keyProperty]=i.substr(1):s.views[i].args[s.keyProperty]=i;else s.views[o]?s.views[o]&&s.views[o].args&&(s.views[o].args[s.keyProperty]=t,s.views[o].args[s.subProperty]=e):(cancelAnimationFrame(s.willReRender),s.willReRender=requestAnimationFrame(function(){s.reRender()}))}});this._onRemove.add(v),Object.preventExtensions(this)}var n,u;return n=t,(u=[{key:"render",value:function(e){var t,n=this,r=[],o=a(this.views);try{var i=function(){var n=t.value;n.render(e),r.push(n.rendered.then(function(){return n}))};for(o.s();!(t=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}this.tag=e,Promise.all(r).then(function(e){return n.renderComplete(e)}),this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}},{key:"reRender",value:function(){var e=this;if(!this.paused&&this.tag){var t=[],n=new r.SetMap;for(var o in this.views){var i=this.views[o],u=i.args[this.subProperty];n.add(u,i),t[o]=i}var c=[],s=new Set;this.downDebind.length&&this.downDebind.forEach(function(e){return e&&e()}),this.upDebind.length&&this.upDebind.forEach(function(e){return e&&e()}),this.upDebind.length=0,this.downDebind.length=0;var l=1/0,f=1/0,v=function(t){var r=!1,o=t;if(isNaN(o)?o="_"+t:String(o).length&&(o=Number(o)),void 0!==e.args.value[t]&&n.has(e.args.value[t])){var i=n.getOne(e.args.value[t]);i&&(i.args[e.keyProperty]=t,c[o]=i,s.add(i),r=!0,isNaN(o)||(l=Math.min(l,o),o>0&&(f=Math.min(f,o))),n.remove(e.args.value[t],i))}if(!r){var a={},u=c[o]=new e.viewClass(a,e.parent);isNaN(o)||(l=Math.min(l,o),o>0&&(f=Math.min(f,o))),c[o].template=e.template,c[o].viewList=e,c[o].args[e.keyProperty]=t,c[o].args[e.subProperty]=e.args.value[t],e.upDebind[o]=a.bindTo(e.subProperty,function(t,n,r,o){var i=a[e.keyProperty];o?delete e.args.value[i]:e.args.value[i]=t}),e.downDebind[o]=e.subArgs.bindTo(function(e,t,n,r){r?delete a[t]:a[t]=e});var v=function(){e.upDebind.filter(function(e){return e}).forEach(function(e){return e()}),e.upDebind.length=0},d=function(){e.downDebind.filter(function(e){return e}).forEach(function(e){return e()}),e.downDebind.length=0};u.onRemove(function(){e._onRemove.remove(v),e._onRemove.remove(d),e.upDebind[o]&&e.upDebind[o](),e.downDebind[o]&&e.downDebind[o](),delete e.upDebind[o],delete e.downDebind[o]}),e._onRemove.add(v),e._onRemove.add(d),a[e.subProperty]=e.args.value[t]}};for(var d in this.args.value)v(d);for(var p in t)s.has(t[p])||t[p].remove();if(Array.isArray(this.args.value)){var h=0===l&&void 0!==c[1]&&c.length>1||f===1/0?l:f;this.rendered=function t(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=c.length-n-1;r>h&&void 0===c[r];)r--;return r<h?Promise.resolve():c[r]===e.views[r]?c[r]&&!c[r].firstNode?(c[r].render(e.tag,c[r+1]),c[r].rendered.then(function(){return t(Number(n)+1)})):n%500?t(Number(n)+1):new Promise(function(e){return requestAnimationFrame(function(){return e(t(Number(n)+1))})}):(c[r].render(e.tag,c[r+1]),e.views.splice(r,0,c[r]),c[r].rendered.then(function(){return t(n+1)}))}()}else{var y,b=[],m=Object.assign({},c),g=function(e){return parseInt(e)===e-0},w=a(Object.keys(c).sort(function(e,t){return g(e)&&g(t)?Math.sign(e-t):g(e)||g(t)?!g(e)&&g(t)?-1:g(e)&&!g(t)?1:void 0:0}));try{var O=function(){var t=y.value;if(delete m[t],c[t].firstNode&&c[t]===e.views[t])return"continue";c[t].render(e.tag),b.push(c[t].rendered.then(function(){return c[t]}))};for(w.s();!(y=w.n()).done;)O()}catch(e){w.e(e)}finally{w.f()}for(var j in m)delete this.args.views[j],m.remove();this.rendered=Promise.all(b)}for(var _ in c)isNaN(_)?c[_].args[this.keyProperty]=_.substr(1):c[_].args[this.keyProperty]=_;this.views=Array.isArray(this.args.value)?[].concat(c):c,s.clear(),this.willReRender=!1,this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var t in this.views)this.views[t].pause(e)}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"remove",value:function(){for(var t in this.views)this.views[t].remove();var n=this._onRemove.items();for(var r in n)this._onRemove.remove(n[r]),n[r]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&e.Bindable.clearBindings(this.subArgs),e.Bindable.clearBindings(this.args),this.args.value&&!this.args.value.isBound()&&e.Bindable.clearBindings(this.args.value),this.removed=!0}}])&&s(n.prototype,u),t}();t.ViewList=l}()}),require.register("curvature/mixin/EventTargetMixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventTargetMixin=void 0;var e,r=n("../base/Mixin");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=Symbol("Target"),a=(o(e={},r.Mixin.Constructor,function(){try{this[i]=new EventTarget}catch(e){this[i]=document.createDocumentFragment()}}),o(e,"dispatchEvent",function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];"string"==typeof o&&(o=new CustomEvent(o),n[0]=o),(e=this[i]).dispatchEvent.apply(e,n);var a="on".concat(o.type[0].toUpperCase()+o.type.slice(1));return"function"==typeof this[a]&&this[a](o),o.returnValue}),o(e,"addEventListener",function(){var e;(e=this[i]).addEventListener.apply(e,arguments)}),o(e,"removeEventListener",function(){var e;(e=this[i]).removeEventListener.apply(e,arguments)}),e);t.EventTargetMixin=a}()}),require.register("curvature/mixin/PromiseMixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseMixin=void 0;var e,r=n("../base/Mixin");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=Symbol("Promise"),a=Symbol("Accept"),u=Symbol("Reject"),c=(o(e={},r.Mixin.Constructor,function(){var e=this;this[i]=new Promise(function(t,n){e[a]=t,e[u]=n})}),o(e,"then",function(){var e;return(e=this[i]).then.apply(e,arguments)}),o(e,"catch",function(){var e;return(e=this[i]).catch.apply(e,arguments)}),o(e,"finally",function(){var e;return(e=this[i]).finally.apply(e,arguments)}),e);t.PromiseMixin=c,Object.defineProperty(c,"Reject",{value:u}),Object.defineProperty(c,"Accept",{value:a})}()}),require.register("Application.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Application=void 0;var r=t("curvature/base/Bindable"),o=t("./Strings");function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=window.Application=r.Bindable.make(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),u(this,"userAddress",void 0),u(this,"_web3",void 0),u(this,"message",void 0)}return function(e,t,n){n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,0,[{key:"web3",get:function(){return c._web3=c._web3||new Web3(c.ethereum),c._web3}},{key:"ethereum",get:function(){return!1 in window?void console.warn(o.Strings.ERROR_NOTFOUND_WEB3()):ethereum}},{key:"login",value:function(){return c.ethereum.request({method:"eth_requestAccounts"}).then(function(e){return c.onLoginSuccess(e)}).catch(function(e){return c.onLoginFailed(e)})}},{key:"onLoginSuccess",value:function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,1)[0];c.userAddress=t}},{key:"onLoginFailed",value:function(e){c.userAddress=null,console.warn(e)}},{key:"sign",value:function(e){var t=c.web3.utils.utf8ToHex(e);return c.message=e,c.ethereum.request({method:"personal_sign",params:[t,c.userAddress]}).then(function(e){return c.onSignSuccess(e)}).catch(function(e){return c.onSignFailed(e)})}},{key:"onSignSuccess",value:function(e){return c.signature=e,e}},{key:"onSignFailed",value:function(e){console.warn(e)}},{key:"verify",value:function(e,t){var n=c.web3.utils.utf8ToHex(e);return c.web3.eth.personal.ecRecover(n,t).then(function(e){return c.onVerifySuccess(e)}).catch(function(e){return c.onVerifyFailed(e)})}},{key:"onVerifySuccess",value:function(e){return console.log(e),e}},{key:"onVerifyFailed",value:function(e){console.warn(e)}}]),e}());e.Application=c}),require.register("Challenge.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Challenge=void 0;var o=t("curvature/base/View"),i=t("./Application"),a=t("./Strings"),u=t("./Config");function c(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){function t(e,r){var o;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),(o=n.call(this,e,r)).template='<h1>Solve Challenge</h1>\n<p><small>Solving as [[address]]</small></p>\n<p><button cv-on = "click:onStartClicked(event)">start</button></p>\n\n<p>challenge:</p>\n<textarea cv-bind = "challenge"></textarea>\n\n<p>retort:</p>\n<textarea cv-bind = "retort"></textarea>\n\n<p>result:</p>\n<textarea cv-bind = "result"></textarea>\n\n<p><small>[[status]]</small></p>',o.args.status="...",i.Application.ethereum||(o.args.status=i.Application.ERROR_NOTFOUND_WEB3);var a=i.Application.bindTo("userAddress",function(e){e&&(o.args.address=e)});return o.onRemove(a),o}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,o.View);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}(t);return function(e,t,n){t&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"onStartClicked",value:function(){var e=this,t="include",n=this.args.address,r="POST",o=new FormData;o.append("address",n),fetch("".concat(u.Config.mediaGate,"/challenge"),{method:r,body:o,credentials:t}).then(function(e){return e.text()}).then(function(t){return e.args.challenge=t,i.Application.sign(e.args.challenge).then(function(r){var o={address:n,signature:r,challenge:t,time:Date.now()};return e.args.retort=JSON.stringify(o),o})}).then(function(n){o.append("retort",JSON.stringify(n)),fetch("//".concat(u.Config.mediaGate,"/challenge"),{method:r,body:o,credentials:t}).then(function(e){return e.text()}).then(function(t){e.args.result=t;var r=(t=JSON.parse(t)).requested;i.Application.challenge=JSON.parse(r.challenge),i.Application.token=n,e.args.status=t.response.valid?a.Strings.MSG_CHALLENGE_VERIFIED():a.Strings.ERR_CHALLENGE_FAILED()})})}}]),t}();e.Challenge=v}),require.register("Config.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0,e.Config={mediaGate:"//media-gate.herokuapp.com"}}),require.register("FileIndex.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.FileIndex=void 0;var o=t("curvature/base/View"),i=t("./Application"),a=t("./Loader"),u=(t("./Strings"),t("./media-view/Image")),c=t("./media-view/Audio"),s=t("./media-view/Video"),l=t("./media-view/Doc"),f=t("./Config");function v(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){function t(e,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(h(o=n.call(this,e,r)),"template",'<div>[[mediaView]]</div>\n\n<small><pre>[[tokenString]]</pre></small>\n<small cv-if = "validTimer">Token valid for [[validTimer]]</small>\n\n<ul cv-each = "files:file">\n\t<li><a cv-link cv-on = "click:getAsset(event, file)">[[file]]</a></li>\n</ul>'),o.args.mediaView=null,i.Application.bindTo("token",function(e){e&&(o.args.validTimer=i.Application.challenge.validThru-Date.now()/1e3,fetch("".concat(f.Config.mediaGate,"/media")).then(function(e){return e.json()}).then(function(e){return o.args.files=e}))}),o.onFrame(function(){return i.Application.challenge?void(o.args.validTimer=+Math.max(0,i.Application.challenge.validThru-Date.now()/1e3).toFixed(3)):void(o.args.validTimer=0)}),o}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,o.View);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}(t);return function(e,t,n){t&&v(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"getAsset",value:function(e,t){var n=this;e.preventDefault(),this.args.mediaView=new a.Loader,t=t.replace(/\.\//,"");var r={credentials:"include",headers:{Authorization:"Bearer ".concat(JSON.stringify(i.Application.token))}};("jpg"===t.substr(-3)||"png"===t.substr(-3))&&fetch("".concat(f.Config.mediaGate,"/media/show?assetPath=").concat(t),r).then(function(e){return e.blob()}).then(function(e){var r=URL.createObjectURL(e,{type:"image/"+t.substr(-3)});n.args.mediaView=new u.Image({src:r})}),("mp3"===t.substr(-3)||"wav"===t.substr(-3))&&fetch("".concat(f.Config.mediaGate,"/media/show?assetPath=").concat(t),r).then(function(e){return e.blob()}).then(function(e){var r=URL.createObjectURL(e,{type:"audio/"+t.substr(-3)});n.args.mediaView=new c.Audio({src:r})}),"mp4"===t.substr(-3)&&fetch("".concat(f.Config.mediaGate,"/media/show?assetPath=").concat(t),r).then(function(e){return e.blob()}).then(function(e){var r=URL.createObjectURL(e,{type:"video/"+t.substr(-3)});n.args.mediaView=new s.Video({src:r})}),("html"===t.substr(-4)||"json"===t.substr(-4))&&fetch("".concat(f.Config.mediaGate,"/media/show?assetPath=").concat(t),r).then(function(e){return e.blob()}).then(function(e){var r=URL.createObjectURL(e,{type:"text/"+t.substr(-4)});n.args.mediaView=new l.Doc({src:r})}),"pdf"===t.substr(-3)&&fetch("".concat(f.Config.mediaGate,"/media/show?assetPath=").concat(t),r).then(function(e){return e.blob()}).then(function(e){var r=URL.createObjectURL(e,{type:"application/"+t.substr(-4)});n.args.mediaView=new l.Doc({src:r})})}}]),t}();e.FileIndex=b}),require.register("Loader.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Loader=void 0,t("curvature/base/Config");var u=function(e){function t(e,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=n.call(this,e,r)).template='<svg viewBox="0 0 100 100">\n\t<ellipse\n\t\tstyle="\n\t\t\tstroke-width: 5;\n\t\t\tfill:         none;\n\t\t\tstroke:       [[color]];\n\t\t"\n\t\tstroke-dasharray = "314px"\n\t\tcx               = "50"\n\t\tcy               = "50"\n\t\trx               = "47.5"\n\t\try               = "47.5"\n\t>\n\t\t<animateTransform\n\t\t\tattributeName = "transform"\n\t\t\tattributeType = "XML"\n\t\t\ttype          = "rotate"\n\t\t\tfrom          = "0   50 50"\n\t\t\tto            = "360 50 50"\n\t\t\tdur           = "[[speed]]s"\n\t\t\trepeatCount   = "[[repeatCount]]"\n\t\t/>\n\t\t<animate\n\t\t\tattributeName = "stroke-dashoffset"\n\t\t\tattributeType = "XML"\n\t\t\tfrom          = "0px"\n\t\t\tto            = "628px"\n\t\t\tdur           = "[[halfSpeed]]s"\n\t\t\trepeatCount   = "[[repeatCount]]"\n\t\t/>\n\t</ellipse>\n</svg>\n',o.args.repeatCount="indefinite",o.args.color="#000",o.args.speed=.333,o.args.bindTo("speed",function(e){o.args.halfSpeed=3*e}),o}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var o=a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return i(this,n)}}(t);return function(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(t("curvature/base/View").View);e.Loader=u}),require.register("Login.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Login=void 0;var o=t("curvature/base/View"),i=t("./Application"),a=t("./Strings");function u(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){function t(e,r){var o;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),(o=n.call(this,e,r)).template='<h1>Login</h1>\n<p>[[status]]</p>\n<p><button cv-on = "click:onLoginClicked(event)">login</button></p>',i.Application.ethereum||(o.args.status=i.Application.ERROR_NOTFOUND_WEB3),o.args.status="...";var u=i.Application.bindTo("userAddress",function(e){e&&(o.args.status=a.Strings.MSG_USER_WELCOME(e),o.remove())});return o.onRemove(u),o}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,o.View);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}(t);return function(e,t,n){t&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"onLoginClicked",value:function(){var e=this;i.Application.login().catch(function(){return e.args.status="Please try again."})}}]),t}();e.Login=f}),require.register("Sign.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Sign=void 0;var o=t("curvature/base/View"),i=t("./Application");function a(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t("./Strings");var l=function(e){function t(e,r){var o;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),(o=n.call(this,e,r)).template='<h1>Sign Message</h1>\n<p><small>Signing as [[address]]</small></p>\n<p>msg: <input cv-bind = "message"></p>\n<p>sig: <input cv-bind ="sig" readonly = "true"></p>\n<p><button cv-on = "click:onSignClicked(event)">sign</button></p>',i.Application.ethereum||(o.args.status=i.Application.ERROR_NOTFOUND_WEB3),o.args.address=null,o.args.message="testing!",o.args.sig=null;var a=i.Application.bindTo("userAddress",function(e){e&&(o.args.address=e)});return o.onRemove(a),o}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,o.View);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}(t);return function(e,t,n){t&&a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"onSignClicked",value:function(){var e=this;i.Application.sign(this.args.message).then(function(t){console.log(t),e.args.sig=t})}}]),t}();e.Sign=l}),require.register("Strings.js",function(e,t,n){"use strict";function r(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.Strings=void 0;var i=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)});e.Strings=i,o(i,"ERR_NOTFOUND_WEB3",function(){return"Web3 provider not found."}),o(i,"MSG_USER_WELCOME",function(e){return"Hello, ".concat(e,".")}),o(i,"MSG_SIG_VERIFIED",function(e){return"✓ Verified message from ".concat(e,".")}),o(i,"ERR_SIG_INVALID",function(){return"× Signature corrupt or invalid!"}),o(i,"MSG_CHALLENGE_VERIFIED",function(){return"✓ Challenge solved!."}),o(i,"ERR_CHALLENGE_FAILED",function(){return"× Challenge failed."})}),require.register("Verify.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Verify=void 0;var o=t("curvature/base/View"),i=t("./Application"),a=t("./Strings");function u(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){function t(e,r){var o;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),(o=n.call(this,e,r)).template='<h1>Verify Message</h1>\n<p>[[status]]</p>\n<p>address: <input cv-bind = "address"></p>\n<p>msg: <input cv-bind = "message"></p>\n<p>sig: <input cv-bind ="signature"></p>\n<p><button cv-on = "click:onVerifyClicked(event)">verify</button></p>',i.Application.ethereum||(o.args.status=i.Application.ERROR_NOTFOUND_WEB3),o.args.message=null,o.args.address=null,o.args.signature=null;var a=i.Application.bindTo("userAddress",function(e){o.args.address=e}),u=(i.Application.bindTo("signature",function(e){o.args.signature=e}),i.Application.bindTo("message",function(e){o.args.message=e}));return o.onRemove(a),o.onRemove(u),o}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,o.View);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}(t);return function(e,t,n){t&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"onVerifyClicked",value:function(){var e=this;this.args.status="...",i.Application.verify(this.args.message,this.args.signature).then(function(t){e.args.status=(e.args.address+"").toLowerCase()===(t+"").toLowerCase()?a.Strings.MSG_SIG_VERIFIED(t):String.ERR_SIG_INVALID()})}}]),t}();e.Verify=f}),require.register("client.js",function(e,t,n){"use strict";var r=t("./Login").Login,o=(t("./Sign").Sign,t("./Verify").Verify,t("./Challenge").Challenge),i=t("./FileIndex").FileIndex;window.addEventListener("DOMContentLoaded",function(){(new r).render(document.body),(new o).render(document.body),(new i).render(document.body)})}),require.register("media-view/Audio.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Audio=void 0;var o=t("curvature/base/View");function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t("../Application"),t("../Strings");var s=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(u(e=n.call.apply(n,[this].concat(o))),"template",'<audio controls cv-attr = "src:src"></audio>'),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(t,o.View);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}(t);return function(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.Audio=s}),require.register("media-view/Doc.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Doc=void 0;var o=t("curvature/base/View");function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t("../Application"),t("../Strings");var s=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(u(e=n.call.apply(n,[this].concat(o))),"template",'<iframe src = "[[src]]"></iframe>'),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(t,o.View);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}(t);return function(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.Doc=s}),require.register("media-view/Image.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;var o=t("curvature/base/View");function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t("../Application"),t("../Strings");var s=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(u(e=n.call.apply(n,[this].concat(o))),"template",'<img cv-attr = "src:src" />'),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(t,o.View);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}(t);return function(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.Image=s}),require.register("media-view/Video.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Video=void 0;var o=t("curvature/base/View");function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t("../Application"),t("../Strings");var s=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(u(e=n.call.apply(n,[this].concat(o))),"template",'<video controls cv-attr = "src:src" />'),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(t,o.View);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}(t);return function(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.Video=s}),require.register("___globals___",function(e,t,n){})}(),require("___globals___"),require("client");
